{% extends 'analyzer/base.html' %}
{% block title_block %}Single Search{% endblock %}

{% block content %}

  {% for message in messages %}
  <div class="alert alert-danger fade show text-center" role="alert">
    {{ message }}
  </div>
  {% endfor %}


  {% if data %}
  <center>
    <div class="image mt-3">
      <img class="profile-pic" src="{{ data.photo }}" alt="">
    </div>


<div class="info-space mt-3">
  <p class="handle"><a href="https://codeforces.com/profile/{{data.handle}}" style="color: {{ data.curColor }}">{{ data.handle }}</a><span class="tab" style="color: {{ data.curColor }}">{{ data.curRating }}</span></p>
  <p class="rank" style="color: {{ data.curColor }}">{{ data.curRank|title }}</p>
  <hr class="style-seperate" style="background-color: {{ data.curColor }}">
  <p>Min Rating:<span style="color: {{ contest_info.minColor }}" class="tab">{{ contest_info.minRating }}</span></p>
  <p>Max Rating:<span style="color: {{ data.maxColor }}" class="tab">{{ data.maxRating }}</span></p>
  <hr class="seperate">
  <p>Min Rank:<span class="tab">{{ contest_info.minStanding }}</span></p>
  <p>Max Rank:<span class="tab">{{ contest_info.maxStanding }}</span></p>
  <hr class="seperate">
  <p>Total Submission:<span class="tab">{{ submission_info.totalSub }}</span></p>
  <p>Successful Submission:<span class="tab">{{ submission_info.successSub }}</span></p>
  <p>Failed Submission:<span class="tab">{{ submission_info.failedSub }}</span></p>
  <p>Ratio:<span class="tab text-success">{{ submission_info.successRatio }}</span> : <span class="text-danger">{{ submission_info.failedRatio }}</span></p>
  <hr class="seperate">
  <h3>Top 5 tags</h3>
  <table class="table table-striped table-dark text-center mt-3">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Tag</th>
      <th scope="col">Solved</th>
    </tr>
  </thead>

  <tbody>
    {% for tag,count in submission_info.topTags.items %}
    <tr>
      <th scope="row">{{forloop.counter}}</th>
      <td>{{tag}}</td>
      <td>{{count}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>




</div>

  {% else %}
    <div class="jumbotron mt-3">
      <center>
        <form class="w-75" method="POST">
          {% csrf_token %}
          <input class="form-control mr-sm-2" action="/" name="handle" placeholder="Codeforces Handle" required>
          <button class="btn btn-outline-success mt-3" type="submit">Go, Fetch!</button>
        </form>
      </center>
    </div>
  {% endif %}

{% endblock %}
